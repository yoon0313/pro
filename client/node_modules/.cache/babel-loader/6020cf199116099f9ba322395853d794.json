{"ast":null,"code":"/*\n    Copyright 2018 The caver-js Authors\n    This file is part of the caver-js library.\n\n    The caver-js library is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    The caver-js library is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\n*/\n// const fs = typeof window !== 'object' && require('fs') || {}\nvar fs = {};\nvar DEFAULT_FILE_PATH = './';\nvar DEFAULT_FILE_NAME = 'rpcLogs';\nvar DEFAULT_FILE_EXTENSION = 'log';\n\nvar guaranteeFilePath = filePath => {\n  return filePath.slice(-1) !== '/' ? \"\".concat(filePath, \"/\") : filePath;\n};\n\nvar appendToFile = (filePath, contents) => {\n  fs.appendFileSync(filePath, \"\".concat(contents, \"\\n\"), err => {\n    if (err) throw err;\n  });\n};\n\nvar fileLogger = (options = {}) => (data, next) => {\n  if (typeof options !== 'object') {\n    throw Error('file logger must take an object type argument.');\n  }\n\n  options.path = guaranteeFilePath(options.path) || DEFAULT_FILE_PATH;\n  options.name = options.name || DEFAULT_FILE_NAME;\n  options.extension = options.extension || DEFAULT_FILE_EXTENSION;\n  var fileName = \"\".concat(options.path).concat(options.name, \".\").concat(options.extension); // Add timestamp for RPC request || response.\n\n  data.timestamp = new Date().getTime();\n\n  switch (options.extension) {\n    case 'csv':\n      // TODO: stringify to csv.\n      appendToFile(fileName, JSON.stringify(data));\n      break;\n\n    default:\n      appendToFile(fileName, JSON.stringify(data));\n  }\n\n  next();\n};\n\nmodule.exports = fileLogger;","map":{"version":3,"sources":["C:/Users/MONK/Desktop/Pro/client/node_modules/caver-js/packages/caver-middleware/src/builtins/fileLogger.js"],"names":["fs","DEFAULT_FILE_PATH","DEFAULT_FILE_NAME","DEFAULT_FILE_EXTENSION","guaranteeFilePath","filePath","slice","appendToFile","contents","appendFileSync","err","fileLogger","options","data","next","Error","path","name","extension","fileName","timestamp","Date","getTime","JSON","stringify","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,IAAMA,EAAE,GAAG,EAAX;AAEA,IAAMC,iBAAiB,GAAG,IAA1B;AACA,IAAMC,iBAAiB,GAAG,SAA1B;AACA,IAAMC,sBAAsB,GAAG,KAA/B;;AAEA,IAAMC,iBAAiB,GAAGC,QAAQ,IAAI;AAClC,SAAOA,QAAQ,CAACC,KAAT,CAAe,CAAC,CAAhB,MAAuB,GAAvB,aAAgCD,QAAhC,SAA8CA,QAArD;AACH,CAFD;;AAIA,IAAME,YAAY,GAAG,CAACF,QAAD,EAAWG,QAAX,KAAwB;AACzCR,EAAAA,EAAE,CAACS,cAAH,CAAkBJ,QAAlB,YAA+BG,QAA/B,SAA6CE,GAAG,IAAI;AAChD,QAAIA,GAAJ,EAAS,MAAMA,GAAN;AACZ,GAFD;AAGH,CAJD;;AAMA,IAAMC,UAAU,GAAG,CAACC,OAAO,GAAG,EAAX,KAAkB,CAACC,IAAD,EAAOC,IAAP,KAAgB;AACjD,MAAI,OAAOF,OAAP,KAAmB,QAAvB,EAAiC;AAC7B,UAAMG,KAAK,CAAC,gDAAD,CAAX;AACH;;AAEDH,EAAAA,OAAO,CAACI,IAAR,GAAeZ,iBAAiB,CAACQ,OAAO,CAACI,IAAT,CAAjB,IAAmCf,iBAAlD;AACAW,EAAAA,OAAO,CAACK,IAAR,GAAeL,OAAO,CAACK,IAAR,IAAgBf,iBAA/B;AACAU,EAAAA,OAAO,CAACM,SAAR,GAAoBN,OAAO,CAACM,SAAR,IAAqBf,sBAAzC;AAEA,MAAMgB,QAAQ,aAAMP,OAAO,CAACI,IAAd,SAAqBJ,OAAO,CAACK,IAA7B,cAAqCL,OAAO,CAACM,SAA7C,CAAd,CATiD,CAWjD;;AACAL,EAAAA,IAAI,CAACO,SAAL,GAAiB,IAAIC,IAAJ,GAAWC,OAAX,EAAjB;;AAEA,UAAQV,OAAO,CAACM,SAAhB;AACI,SAAK,KAAL;AACI;AACAX,MAAAA,YAAY,CAACY,QAAD,EAAWI,IAAI,CAACC,SAAL,CAAeX,IAAf,CAAX,CAAZ;AACA;;AACJ;AACIN,MAAAA,YAAY,CAACY,QAAD,EAAWI,IAAI,CAACC,SAAL,CAAeX,IAAf,CAAX,CAAZ;AANR;;AASAC,EAAAA,IAAI;AACP,CAxBD;;AA0BAW,MAAM,CAACC,OAAP,GAAiBf,UAAjB","sourcesContent":["/*\n    Copyright 2018 The caver-js Authors\n    This file is part of the caver-js library.\n\n    The caver-js library is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    The caver-js library is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\n*/\n\n// const fs = typeof window !== 'object' && require('fs') || {}\nconst fs = {}\n\nconst DEFAULT_FILE_PATH = './'\nconst DEFAULT_FILE_NAME = 'rpcLogs'\nconst DEFAULT_FILE_EXTENSION = 'log'\n\nconst guaranteeFilePath = filePath => {\n    return filePath.slice(-1) !== '/' ? `${filePath}/` : filePath\n}\n\nconst appendToFile = (filePath, contents) => {\n    fs.appendFileSync(filePath, `${contents}\\n`, err => {\n        if (err) throw err\n    })\n}\n\nconst fileLogger = (options = {}) => (data, next) => {\n    if (typeof options !== 'object') {\n        throw Error('file logger must take an object type argument.')\n    }\n\n    options.path = guaranteeFilePath(options.path) || DEFAULT_FILE_PATH\n    options.name = options.name || DEFAULT_FILE_NAME\n    options.extension = options.extension || DEFAULT_FILE_EXTENSION\n\n    const fileName = `${options.path}${options.name}.${options.extension}`\n\n    // Add timestamp for RPC request || response.\n    data.timestamp = new Date().getTime()\n\n    switch (options.extension) {\n        case 'csv':\n            // TODO: stringify to csv.\n            appendToFile(fileName, JSON.stringify(data))\n            break\n        default:\n            appendToFile(fileName, JSON.stringify(data))\n    }\n\n    next()\n}\n\nmodule.exports = fileLogger\n"]},"metadata":{},"sourceType":"script"}